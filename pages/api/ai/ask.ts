import type { NextApiRequest, NextApiResponse } from "next";

const ANSWERS: Record<string, string> = {
  jackpot: "üíé –î–∂–µ–∫–ø–æ—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥. –í—Å–µ –¥–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é —Å –±–ª–æ–∫—á–µ–π–Ω–∞ TON.",
  rules: "üé≤ –í –ª–æ—Ç–µ—Ä–µ–µ TONIX –∫–∞–∂–¥—ã–π –±–∏–ª–µ—Ç ‚Äî —ç—Ç–æ —à–∞–Ω—Å –≤—ã–∏–≥—Ä–∞—Ç—å —á–∞—Å—Ç—å –ø—É–ª–∞. –í—Å—ë –ø—Ä–æ–∑—Ä–∞—á–Ω–æ –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º–æ –æ–Ω—á–µ–π–Ω.",
  tonixpass: "ü™™ TONIX PASS ‚Äî –≤–∞—à –ø—Ä–æ–ø—É—Å–∫ –≤ –ø—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏–∏, XP-–æ—á–∫–∏ –∏ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –∏–≤–µ–Ω—Ç—ã.",
  xp: "‚ö° XP –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –¥—Ä—É–∑–µ–π –∏ –ø–æ–±–µ–¥—ã –≤ —Ä–æ–∑—ã–≥—Ä—ã—à–∞—Ö.",
  referral: "üë• –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–∞—ë—Ç –≤–∞–º +25 XP –∑–∞ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–≥–ª–∞—à—ë–Ω–Ω–æ–≥–æ –¥—Ä—É–≥–∞.",
  help: "ü§ñ –Ø –º–æ–≥—É —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –ø—Ä–æ –¥–∂–µ–∫–ø–æ—Ç, XP, –ø—Ä–∞–≤–∏–ª–∞, TONIX PASS –∏–ª–∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É.",
  –¥–∂–µ–∫–ø–æ—Ç: "üíé –î–∂–µ–∫–ø–æ—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥. –í—Å–µ –¥–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é —Å –±–ª–æ–∫—á–µ–π–Ω–∞ TON.",
  –ø—Ä–∞–≤–∏–ª–∞: "üé≤ –í –ª–æ—Ç–µ—Ä–µ–µ TONIX –∫–∞–∂–¥—ã–π –±–∏–ª–µ—Ç ‚Äî —ç—Ç–æ —à–∞–Ω—Å –≤—ã–∏–≥—Ä–∞—Ç—å —á–∞—Å—Ç—å –ø—É–ª–∞. –í—Å—ë –ø—Ä–æ–∑—Ä–∞—á–Ω–æ –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º–æ –æ–Ω—á–µ–π–Ω.",
  –±–∏–ª–µ—Ç: "üéü –ù–∞–∂–º–∏ ¬´–ö—É–ø–∏—Ç—å –±–∏–ª–µ—Ç¬ª ‚Äî –æ—Ç–∫—Ä–æ–µ—Ç—Å—è Tonkeeper –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ 0.5 TON –Ω–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç. –£–¥–∞—á–∏! üíé",
  —Ä–∞—É–Ω–¥: "ü™© –°–ª–µ–¥—É—é—â–∏–π —Ä–æ–∑—ã–≥—Ä—ã—à ‚Äî —Å–º–æ—Ç—Ä–∏ —Ç–∞–π–º–µ—Ä –≤ Hero. –ò—Å—Ç–æ—Ä–∏—è –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π ‚Äî –≤ —Å–µ–∫—Ü–∏–∏ Last Winners.",
  –ø–æ–º–æ—â—å: "ü§ñ –Ø –º–æ–≥—É —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –ø—Ä–æ –¥–∂–µ–∫–ø–æ—Ç, XP, –ø—Ä–∞–≤–∏–ª–∞, TONIX PASS –∏–ª–∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É.",
};

export default function handler(req: NextApiRequest, res: NextApiResponse) {
  if (req.method !== "POST") return res.status(405).json({ ok: false, error: "Method not allowed" });

  const { question, q } = req.body;
  const query = (question || q || "").toLowerCase();

  if (!query) return res.status(400).json({ ok: false, error: "Missing question" });

  // –ò—â–µ–º –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –≤ –∑–∞–ø—Ä–æ—Å–µ
  let key: string | undefined = Object.keys(ANSWERS).find((k) => query.includes(k));
  const answer = key ? ANSWERS[key] : "‚ú® –Ø –ø–æ–∫–∞ –Ω–µ –∑–Ω–∞—é –æ—Ç–≤–µ—Ç –Ω–∞ —ç—Ç–æ, –Ω–æ —Å–∫–æ—Ä–æ –Ω–∞—É—á—É—Å—å!";

  res.status(200).json({ ok: true, answer });
}
